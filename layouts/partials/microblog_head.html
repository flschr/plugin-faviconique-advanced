{{- $p := .Site.Params -}}
{{- $plugins := (index $p "plugins") | default dict -}}
{{- $me := (index $plugins "plugin-faviconique-plus") | default dict -}}
{{- $group := (index $p "faviconique") | default dict -}}

{{- $emoji := (or (index $p "faviconique_emoji") (index $me "faviconique_emoji") (index $group "emoji")) | default "ðŸŒ±" -}}
{{- $style := (or (index $p "faviconique_style") (index $me "faviconique_style") (index $group "style")) | default "apple" -}}
{{- $title := (or (index $p "faviconique_title") (index $me "faviconique_title") (index $group "title") .Site.Title) -}}
{{- $theme := (or (index $p "faviconique_theme_color") (index $me "faviconique_theme_color") (index $group "theme_color")) | default "#000000" -}}
{{- $display := (or (index $p "faviconique_display") (index $me "faviconique_display") (index $group "display")) | default "standalone" -}}
{{- $cdn := "https://emojicdn.elk.sh" -}}
{{- $v := printf "&v=%d" .Site.LastChange.Unix -}}
{{- $base := printf "%s/%s?style=%s&size=" $cdn (urlquery $emoji) (urlquery $style) -}}

<link rel="preconnect" href="{{$cdn}}" crossorigin>
<link rel="dns-prefetch" href="{{$cdn}}">

<link rel="icon" type="image/png" sizes="16x16" href="{{$base}}16{{$v}}">
<link rel="icon" type="image/png" sizes="32x32" href="{{$base}}32{{$v}}">
<link rel="icon" type="image/png" sizes="48x48" href="{{$base}}48{{$v}}">
<link rel="icon" type="image/png" sizes="96x96" href="{{$base}}96{{$v}}">
<link rel="icon" type="image/png" sizes="192x192" href="{{$base}}192{{$v}}">
<link rel="icon" type="image/png" sizes="512x512" href="{{$base}}512{{$v}}">
<link rel="shortcut icon" type="image/png" href="{{$base}}32{{$v}}">
<link rel="apple-touch-icon" sizes="180x180" href="{{$base}}180{{$v}}">
<link rel="manifest" href="{{ "manifest.webmanifest" | relURL }}">

{{- if eq $display "standalone" }}
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
{{- end }}
<meta name="apple-mobile-web-app-title" content="{{ $title }}">
<meta name="application-name" content="{{ $title }}">
{{- if ne $theme "#000000" }}
<meta name="theme-color" content="{{ $theme }}">
<meta name="msapplication-TileColor" content="{{ $theme }}">
{{- end }}

